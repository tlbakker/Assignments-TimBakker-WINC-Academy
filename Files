__winc_id__ = 'ae539110d03e49ea8738fd413ac44ba8'
__human_name__ = 'files'

import os
import shutil
from zipfile import ZipFile

cache_dir = 'C:/Users/timmi/Winc/files/cache/'
zip_dir = 'C:/Users/timmi/Winc/files/data.zip/'

def clean_cache():
    if os.path.exists(cache_dir) is False:
        os.makedirs(cache_dir)
        print("Created cache directory in /winc/files/")
    else:
        print("Deleting all contents in cache folder:")
        print(os.listdir(cache_dir))
        for f in os.listdir(cache_dir):
            file_path = os.path.join(cache_dir, f)
            if os.path.isfile(file_path) or os.path.islink(file_path):
                os.remove(file_path)
    return


def cache_zip(zip_file_path, chache_dir_path):
    print(zip_file_path, chache_dir_path)
    with ZipFile(zip_file_path, 'r') as zipObj:
        zipObj.extractall(chache_dir_path)
        return os.listdir(chache_dir_path)


def cached_files():
    dir = 'files/cache'
    file_list = []
    for path in os.listdir(dir):
        full_path = os.path.join(dir, path)
        if os.path.isfile(full_path):
            file_list.append(os.path.abspath(full_path))
    return file_list


def find_password(list_of_file_paths):  #vind een wachtwoord in de gegeven lijst van file paths
    password_list = [] #lege lijst, later te gebruiken
    for file in list_of_file_paths: #voor elk bestand in de bestandslocatielijst
        with open(file, 'r') as f: # met elk open bestand als f
            for line in f: #voor elke regel in f
                if "password" in line: #als de string "password" erin voorkomt
                    password_list.append(line) #voeg deze regel toe aan de lege password-lijst
                    password_string = str(password_list).strip('[]') #maak van dit lijst-element een string
                    password_password = password_string.replace(r'\n', '') #verwijder de new line command
                    password = password_password.replace(r'password: ', '')
    return password
